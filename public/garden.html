<!DOCTYPE html>
<html>
<head>
	<title>DRIP Garden Scheduler</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <link rel="icon" href="https://themanor.farm/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<style>
  body { background-color:#222; color:#FFF; font-family:'Ubuntu', sans-serif; padding:10px; font-size:16px; line-height:105%; }
  input { background-color:#444; color:#FFF; width:90%; text-align:left; padding:5px 10px 5px 10px; outline:none; border-style:solid; border:0; }
  td { padding:10px 10px;  border-bottom:5px solid #222; }
  td { text-align:right; background-color:#282828; }
  td:first-child { background-color:#111; text-align:left; white-space:nowrap; }
  td.blank { background-color:transparent; }
  .font-sm { font-size:12px; line-height:1; }
  .no-wrap { white-space:nowrap; }
  .footer { text-align:center; font-size:18px; color:#AAA; padding-top:20px; overflow:hidden; }
  .footer a { color:#EEE; }
  .blue { color:#4396ea }
  .box { padding:20px; background-color:#000; margin:10px 0; border-radius:15px; line-height:1.25; }
</style>
</head>
<body>
    <div id="app">
      <div style="position:absolute; right:0; top:0;">
        <div v-if="license.paid" style="display:inline-block; font-size:14px; color:#4396ea; text-align:right; position:relative; top:5px;">
          <div><i class="fas fa-medal"></i> &nbsp;Donator</div>
          <div v-if="license.paid_value > 0" style="font-size:10px; color:#FFF;">{{ license.paid_value }} {{ license.paid_symbol }}</div>
          <div v-else>&nbsp;</div>
        </div>
        <!--
        <div v-if="!license.paid" style="display:inline-block; font-size:14px; color:#4396ea; text-align:right; position:relative; top:5px;">
          <div><i class="far fa-question-circle"></i> &nbsp;Trial</div>
          <div style="font-size:10px; color:#FFF;">{{ license.days_left }} days left</div>
        </div>-->
        <a href="/" style="display:inline-block; font-size:24px; background-color:#000; color:#4396ea; padding:5px; margin:10px; line-height:1; border-radius:6px;"><i class="fas fa-home"></i></a>
      </div>

      <h1>DRIP Garden <span class="font-sm">Scheduler</span></h1>
      <div v-if="!checkWallet()" class="box">
        Welcome!<br>
        Please paste your PUBLIC wallet address in the field below and click anywhere after.<br>
        This is a read only application, NO wallet connection or transaction involved.<br>
        We will never ask your seed phrase or private key, NEVER give those anywhere!
      </div>
      <table>
        <tr> 
          <td>Contract <div class="font-sm">Balance</div></td> 
          <td><div>{{ contract_balance|numSpace|removeDec }} LP</div></td>
          <td><span class="font-sm">DRIP/BUSD</span> <span class="blue">{{ drip_busd.price|decimal_2 }}$</span></td>
        </tr>
        <tr> 
          <td>1 Plant <span class="font-sm">Info</span></td> 
          <td> <div class="font-sm">{{ seeds_per_plant|numSpace }} seeds make 1 <i class="fas fa-seedling"></i></div> <div class="font-sm">1 <i class="fas fa-seedling"></i> produce 86.4k seeds / day</div> </td>
          <td>
            <div data-toggle="tooltip" data-placement="left" title="Selling 2 592 000 seeds (1 plant worth of seeds), as now, will give you this payout">
              <div class="font-sm no-wrap">2.592M seeds =</div>
              <div class="font-sm blue">{{ rate_plant_lp*drip_busd.price|decimal_2 }}$ = <span class="no-wrap">{{ rate_plant_lp|decimal_3 }} LP <i class="far fa-question-circle" style="color:#FFF;"></i></span></div> 
            </div>
          </td>
        </tr>
        <tr> 
          <td>Wallet <span class="font-sm">Address</span></td>
          <td><input v-model="user.wallet" v-on:keyup="inputWallet()" v-on:paste="inputWallet()" placeholder="Paste Here" /></td> 
          <td><span class="font-sm no-wrap">Balance<br>{{ user_balance|decimal_3 }} LP</span> {{ drip_busd.price*user_balance|decimal_2|numSpace }}$</td>
        </tr>
        <tr v-if="checkWallet()"> 
          <td>Plants <span class="font-sm">grown</span></td> 
          <td><div>{{ user.plants|numSpace }}</div></td>
          <td><div data-toggle="tooltip" data-placement="left" title="*IF* plants were sellable, your Grown Plants * Plants (in seeds) Payout = Assets Value"><span class="font-sm">Assets <i class="far fa-question-circle"></i></span> <span class="no-wrap">{{ user.plants*rate_plant_lp*drip_busd.price|decimal_2|numSpace }}$</span></div></td>
        </tr>
        <tr v-if="checkWallet()"> 
          <td>Seeds <div class="font-sm">available</div> </td> 
          <td><div>{{ user.seeds|numSpace }}</div></td> 
          <td><span class="font-sm">Growing</span> <div class="font-sm no-wrap">{{ user_lp|decimal_3 }} LP</div> {{ drip_busd.price*user_lp|decimal_2 }}$</td>
        </tr>
        <tr v-if="checkWallet()"> 
          <td>Plants <span class="font-sm">/ day</span></td> 
          <td><div>{{ plant_per_day|decimal_3 }}</div> <div class="font-sm">{{ (plant_full_minute/60)|hourToTime }} / <i class="fas fa-seedling"></i></div></td> 
          <td><div data-toggle="tooltip" data-placement="left" title="Track your own LP per day. Make sure your actions increase your daily income"><span class="font-sm">By day <i class="far fa-question-circle"></i></span> {{ drip_busd.price*user_lp_per_day|decimal_2 }}$<div class="blue">{{ user_lp_per_day|decimal_3 }} LP</div></div></td>
        </tr>
        <tr v-if="checkWallet()"> 
          <td>Seeds <span class="font-sm">/ day</span></td> 
          <td><div>{{ seeds_per_day|numSpace }}</div> </td> 
          <td class="blank"></td>
        </tr>
        <tr v-if="checkWallet()"> 
          <td>Seeds <span class="font-sm">needed</span> <div class="font-sm">For next plant</div></td> 
          <td><div>{{ seeds_needed|numSpace }} <div class="font-sm">Next in {{ (seeds_needed / (seeds_per_day/24))|hourToTime }}</div></div></td> 
          <td class="blank"></td>
        </tr>
        <tr v-if="checkWallet()"> 
          <td>Seeds lost <div class="font-sm">If planted now</div></td> 
          <td><div>-{{ seeds_lost|numSpace }}</div></td> 
          <td class="blank"></td>
        </tr>
        <tr v-if="checkWallet()"> 
          <td>Plants <span class="font-sm">ready</span></td> 
          <td><div data-toggle="tooltip" data-placement="left" title="Plants ready to sow = Your available seeds / 2 592 000 seeds">{{ plants_ready }} <i class="far fa-question-circle"></i></div> </td> 
          <td class="blank"></td>
        </tr>

        <tr v-if="checkWallet()" v-for="(nextplant, index) in plant_next_date" class="font-sm">
          <td>Next plant {{ (nextplant.plant+plants_ready) }}</td> <td><div>{{ nextplant.minutes|minToDate }}</div></td>
        </tr>
        
      </table>
    </div><!-- APP -->
    <div id="log"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script><!-- PROD <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script> -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3js-cdn@latest/web3.min.js"></script>
    <script src="tools.js?v=6"></script>
<script>
$is_RedirectHTML = true;
var $WEB3 = new Web3(new Web3.providers.HttpProvider("https://bsc-dataseed.binance.org:443"));
// https://abi.hashex.org/
$ABI = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"address","name":"ref","type":"address"},{"indexed":false,"internalType":"uint256","name":"amountBNB","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amountEggs","type":"uint256"}],"name":"SeedsBought","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"address","name":"ref","type":"address"},{"indexed":false,"internalType":"uint256","name":"seedsUsed","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"marketSeeds","type":"uint256"}],"name":"SeedsPlanted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"seedsSold","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"seedValue","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"marketSeeds","type":"uint256"}],"name":"SeedsSold","type":"event"},{"inputs":[],"name":"BusdAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DripAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DripBusdLp","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DripVaultAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MarketingAndDevelopmentAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PancakeSwapRouter","outputs":[{"internalType":"contract IUniswapV2Router01","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PancakeSwapRouterAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SEEDS_TO_GROW_1PLANT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"ref","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"buySeeds","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"seeds","type":"uint256"}],"name":"calculateSeedSell","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bnb","type":"uint256"},{"internalType":"uint256","name":"contractBalance","type":"uint256"}],"name":"calculateSeedsBuy","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bnb","type":"uint256"}],"name":"calculateSeedsBuySimple","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bnb","type":"uint256"}],"name":"calculateSeedsBuySimpleBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bnb","type":"uint256"}],"name":"calculateSeedsBuySimpleTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bnb","type":"uint256"}],"name":"calculateSeedsBuySimpleTotal","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bnb","type":"uint256"},{"internalType":"uint256","name":"contractBalance","type":"uint256"}],"name":"calculateSeedsBuyTotal","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"rt","type":"uint256"},{"internalType":"uint256","name":"rs","type":"uint256"},{"internalType":"uint256","name":"bs","type":"uint256"}],"name":"calculateTrade","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"claimedSeeds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentBalanceMultiplier","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentTimeMultiplier","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"devFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMyPlants","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMySeeds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"adr","type":"address"}],"name":"getSeedsSinceLastPlant","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getUserSeeds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"hatcheryPlants","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"initialized","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"lastPlant","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"marketSeeds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"ref","type":"address"}],"name":"plantSeeds","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"referrals","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"seedMarket","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sellSeeds","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_top","type":"uint256"},{"internalType":"uint256","name":"multiplier","type":"uint256"}],"name":"setBalanceMultiplier","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_seed","type":"uint256"}],"name":"setSeedAmount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"startTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}];
var $Contract = new $WEB3.eth.Contract($ABI, "0x685BFDd3C2937744c13d7De0821c83191E3027FF");

$ABI_LP = [{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount0","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount1","type":"uint256"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"Burn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount0","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount1","type":"uint256"}],"name":"Mint","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount0In","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount1In","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount0Out","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount1Out","type":"uint256"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"Swap","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint112","name":"reserve0","type":"uint112"},{"indexed":false,"internalType":"uint112","name":"reserve1","type":"uint112"}],"name":"Sync","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"constant":true,"inputs":[],"name":"DOMAIN_SEPARATOR","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"MINIMUM_LIQUIDITY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"PERMIT_TYPEHASH","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"burn","outputs":[{"internalType":"uint256","name":"amount0","type":"uint256"},{"internalType":"uint256","name":"amount1","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"factory","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getReserves","outputs":[{"internalType":"uint112","name":"_reserve0","type":"uint112"},{"internalType":"uint112","name":"_reserve1","type":"uint112"},{"internalType":"uint32","name":"_blockTimestampLast","type":"uint32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"_token0","type":"address"},{"internalType":"address","name":"_token1","type":"address"}],"name":"initialize","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"kLast","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"mint","outputs":[{"internalType":"uint256","name":"liquidity","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"price0CumulativeLast","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"price1CumulativeLast","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"skim","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"amount0Out","type":"uint256"},{"internalType":"uint256","name":"amount1Out","type":"uint256"},{"internalType":"address","name":"to","type":"address"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"swap","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"sync","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"token0","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"token1","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"}];
var $Contract_LP = new $WEB3.eth.Contract($ABI_LP, "0xa0feB3c81A36E885B6608DF7f0ff69dB97491b58");

var $PCS_API = "https://api.pancakeswap.info/api/v2/tokens/";
// ----------------------------------------------------------------------------------------
// -- APP ---------------------------------------------------------------------------------
// ----------------------------------------------------------------------------------------
var app = new Vue({
    el: '#app',
    data: {
      user: {
        wallet: "",
        plants: 10,
        seeds: 3000000
      },
      user_lp: 0,
      user_lp_per_day: 0,
      user_balance: 0,
      rate_plant_lp: 0,
      contract_balance: 0,
      seeds_per_plant: 2592000,
      seeds_per_day: 0,
      plant_per_day:0,
      plants_ready: 0,
      seeds_lost: 0,
      seeds_needed: 0,
      plant_next_date: [],
      plant_full_minute: 0,
      drip_busd: {
        step_calc: 0,
        price: 0,
        busd_price: 0,
        busd_reserve: 0,
        drip_price: 0,
        drip_reserve: 0,
        supply: 0,
        lp_ratio: 0
      },
      license: {},
      log: []
    },
    watch: {
        user: function () { this.userSave(); }
    },
    created: function () {
      this.userLoad();
      this.appTick();
      setInterval(this.appTick, 1 * 60 * 1000);
      setTimeout(this.appTick, 1000);
      this.updateDripBusd();
      $("body").click(function () {
        app.inputWallet();
      });
      if (this.user.wallet != "") {
        API_Get("https://drip-scan.goqc.ca/auth/" + this.user.wallet, function (data) { 
          created = new Date(0).setUTCSeconds(data.created);
          days_since_created = moment(Date.now()).diff(moment(created), "days");
          trial = 5;
          data["days_left"] = trial - days_since_created
          if (!data.auth) { 
            //window.location.replace("donation");
          }
          app.license = data;
          if (app.license.paid) { $Cookie.set("pop-ads", "1", 365); }
        });        
      }
    },

    methods: {
      appTick() {
        this.updateData();
        this.updateDripBusd();
      },
      updateUI() {
        this.seeds_per_day = (this.user.plants * 86400);
        this.plant_per_day = (this.seeds_per_day / this.seeds_per_plant);
        this.plants_ready = Math.floor(this.user.seeds / this.seeds_per_plant);
        this.seeds_lost = this.user.seeds - (this.plants_ready * this.seeds_per_plant);
        this.seeds_needed = this.seeds_per_plant - this.seeds_lost;
        seeds_per_minute = this.seeds_per_day / 24 / 60;
        plant_next_minute = this.seeds_needed / seeds_per_minute;
        this.plant_full_minute = this.seeds_per_plant / seeds_per_minute;

        multi = 1;
        this.plant_next_date = [];
        if (this.plant_next_date.indexOf("NaN") == -1) {
          for (i = 0; i < 10; i++) {
            this.plant_next_date.push({plant:(i+1), minutes:(plant_next_minute + 1 + (this.plant_full_minute * i))});
          }
        }
      },
      updateData() {
        //if (!document.hasFocus()) { return false; }
        if (!this.checkWallet()) { return false; }
        $Contract.methods.getUserSeeds(this.user.wallet).call(function(error, result) {
          if (error) { console.log(error); return false; };
          app.user.seeds = result;
          app.updateUI();
        });
        $Contract.methods.hatcheryPlants(this.user.wallet).call(function(error, result) {
          if (error) { console.log(error); return false; };
          app.user.plants = result;
          app.updateUI();
          $Contract.methods.calculateSeedSell(app.user.plants * 86400).call(function(error, result) {
            if (error) { console.log(error); return false; };
            app.user_lp_per_day = app.toDec18(result * 0.95);
            app.updateUI();
          });
        });
        $Contract_LP.methods.balanceOf(this.user.wallet).call(function(error, result) {
          if (error) { console.log(error); return false; };
          app.user_balance = app.toDec18(result);
          app.updateUI();
        });
        $Contract.methods.getBalance().call(function(error, result) {
          if (error) { console.log(error); return false; };
          //console.log(result);
          app.contract_balance = app.toDec18(result);
        });
        $Contract.methods.SEEDS_TO_GROW_1PLANT().call(function(error, result) {
          if (error) { console.log(error); return false; };
          app.seeds_per_plant = result;
        });
        // $Contract.methods.marketSeeds().call(function(error, result) {
        //   if (error) { console.log(error); return false; };
        //   app.seeds_market = app.toDec18(result);
        // });
        // $Contract.methods.calculateSeedsBuy().call(function(error, result) {
        //   if (error) { console.log(error); return false; };
        //   console.log(result);
        // });
        $Contract.methods.calculateSeedSell(2592000).call(function(error, result) {
          if (error) { console.log(error); return false; };
          app.rate_plant_lp = app.toDec18(result * 0.95);
        });
        $Contract.methods.calculateSeedSell(this.user.seeds).call(function(error, result) {
          if (error) { console.log(error); return false; };
          app.user_lp = app.toDec18(result * 0.95);
        });
      },
      updateDripBusd() {
        this.drip_busd.step_calc = 0;

        $Contract_LP.methods.totalSupply().call(function(error, result) {
          if (error) { console.log(error); return false; };
          app.drip_busd.supply = app.toDec18(result);
          app.drip_busd.step_calc++;
          if (app.drip_busd.step_calc == 4) { app.calcDripBusd(); }
        });        
        $Contract_LP.methods.getReserves().call(function(error, result) {
          if (error) { console.log(error); return false; };
          app.drip_busd.drip_reserve = parseInt(result._reserve0);
          app.drip_busd.busd_reserve = parseInt(result._reserve1);
          app.drip_busd.step_calc++;
          if (app.drip_busd.step_calc == 4) { app.calcDripBusd(); }
        });
        $Contract_LP.methods.token0().call(function(error, result) {
          if (error) { console.log(error); return false; };
          API_Get($PCS_API + result, function (data) { 
            app.drip_busd.drip_price = parseFloat(data.data.price);
            app.drip_busd.step_calc++;
            if (app.drip_busd.step_calc == 4) { app.calcDripBusd(); }
          });
        });
        $Contract_LP.methods.token1().call(function(error, result) {
          if (error) { console.log(error); return false; };
          API_Get($PCS_API + result, function (data) { 
            app.drip_busd.busd_price = parseFloat(data.data.price);
            app.drip_busd.step_calc++;
            if (app.drip_busd.step_calc == 4) { app.calcDripBusd(); }
          });
        });

      },
      calcDripBusd() {
        app.drip_busd.lp_ratio = 1 / app.drip_busd.supply;
        app.drip_busd.price = (app.drip_busd.drip_reserve * app.drip_busd.lp_ratio * app.drip_busd.drip_price)
                            + (app.drip_busd.busd_reserve * app.drip_busd.lp_ratio * app.drip_busd.busd_price);
        app.drip_busd.price = app.toDec18(app.drip_busd.price);
        //console.log(app.drip_busd);
      },
      action(event, cmd) {
        var val = event.target.getAttribute("data-val");
        this.execute(cmd, val);
      },
      checkWallet() {
        this.user.wallet = this.user.wallet.replaceAll(" ", "");
        if (this.user.wallet.length != 42 || this.user.wallet.indexOf("0x") == -1) { return false; }
        return true;
      },
      inputWallet() {
        if (this.checkWallet()) { this.userSave(); }
      },
      userLoad() {
        saved_data = $Cookie.get("USER-GARDEN");
        if (saved_data == undefined) { saved_data = JSON.stringify(this.user); }
        saved_data = JSON.parse(saved_data);
        this.user = saved_data;
        if (!this.checkWallet()) { this.user.wallet = ""; }
        this.updateUI();
      },
      userSave() {
        if (!this.checkWallet()) { this.user.wallet = ""; }
        $Cookie.set("USER-GARDEN", JSON.stringify(this.user));
        console.log("User Saved");
        this.updateUI();
        this.updateData();
        //$('[data-toggle="tooltip"]').tooltip();
      },
      toDec18(num) {
        return num / 1000000000000000000;
      }
    },
    filters: {
      decimal_3(value) { value = parseFloat(value).toFixed(3); if (value == "NaN") { value = 0; } return value; },
      decimal_2(value) { value = parseFloat(value).toFixed(2); if (value == "NaN") { value = 0; } return value; },
      removeDec(num) { return num.toString().split(".")[0]; },
      numSpace(x) {
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
      },
      minToDate(minutes) {
        //return minutes / 60;
        return moment().add(minutes, 'minutes').format('MMM D h:mm A');
      },
      hourToTime(hour) {
        days = moment.duration(hour, 'hours').days() + "d ";
        if (days == "0d ") { days = ""; };
        min = moment.duration(hour, 'hours').minutes();
        if (min <= 9) { min = "0" + min; }
        return days + moment.duration(hour, 'hours').hours() + ":" + min;
      }
    }
  });


function hourChanged() {
  $Contract.methods.calculateSeedSell(2592000).call(function(error, result) {
    if (error) { console.log(error); return false; };
    app.rate_plant_lp = app.toDec18(result * 0.95);
    if (document.location.host.indexOf("localhost") != -1) {
      $("#log").append(new Date().getHours() + ":00 LP / Day: " + (app.rate_plant_lp * app.plant_per_day).toFixed(3) + " - " + (app.rate_plant_lp * app.plant_per_day * app.drip_busd.price).toFixed(2) + "$<br>");
    }
  });
}
var $lastHour = new Date().getHours();
setInterval(function () { if (new Date().getHours() != $lastHour) { $lastHour = new Date().getHours(); hourChanged(); } }, 1000);

$(function () {
  $('[data-toggle="tooltip"]').tooltip();
})
</script>


<div class="footer">
  <div>This app is based on <img src="https://drip.community/img/dropLogo.cea61927.png" style="height:30px;"> <a href="https://drip.community/faucet?buddy=0x287C7d1638E5771947BcdCBd8b174fAc4cF37E08" target="_blank">DRIP Network</a></div>
  <div style="font-size:13px; padding-top:5px;">
      Like it? Airdrop me a coffee <i class="fas fa-coffee"></i> at 0x287C7d1638E5771947BcdCBd8b174fAc4cF37E08 &nbsp;|&nbsp; Dev by <i class="fab fa-telegram-plane"></i>&nbsp; <a href="https://t.me/LukeCharters">@LukeCharters</a>
  </div>
</div>
</body>
</html>

